<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>{{ title or "Хоменко Андрій" }}</title>

  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
</head>

<body>
  {% include "header.njk" %}

  {# ✅ HERO full-width  поза main, як у “старій версії” #}
  {% if hero %}
    <section class="hero">
      <div class="hero-overlay"></div>
      <div class="hero-content">
        <h1>{{ hero_title }}</h1>
        <h3>{{ hero_subtitle }}</h3>
      </div>
    </section>
  {% endif %}

  <main>
    {{ content | safe }}
  </main>

  {% include "footer.njk" %}

  <script>
    const dd = document.getElementById('normDropdown');
    const trigger = dd?.querySelector('.dropdown-trigger');
    const menu = dd?.querySelector('.dropdown-menu');
    const canHover = window.matchMedia('(hover: hover) and (pointer: fine)').matches;

    function setExpanded(isOpen) {
      if (!dd || !trigger) return;
      dd.classList.toggle('open', isOpen);
      trigger.setAttribute('aria-expanded', String(isOpen));
    }

    if (dd && trigger && menu) {
      if (!canHover) {
        trigger.addEventListener('click', (e) => {
          e.preventDefault();
          setExpanded(!dd.classList.contains('open'));
        });
        document.addEventListener('click', (e) => { if (!dd.contains(e.target)) setExpanded(false); });
      } else {
        dd.addEventListener('mouseenter', () => setExpanded(true));
        dd.addEventListener('mouseleave', () => setExpanded(false));
      }
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') setExpanded(false);
    });
  </script>
</body>
</html>
